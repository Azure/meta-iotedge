trigger: none
pr:
  branches:
    include:
      - main
      - sumo
      - thud
      - warrior
      - zeus
      - dunfell
jobs:

################################################################################
  - job: kirkstone
################################################################################
    displayName: Kirkstone
    pool:
      name: meta-iotedge-1es-hosted-linux
      demands:
      - ImageOverride -equals agent-aziotedge-ubuntu-20.04-msmoby
      - DiskSizeGiB -equals 500
      - WorkFolder -equals /mnt/storage/_work
    timeoutInMinutes: 2400
    steps:
      - script: scripts/fetch.sh kirkstone
        displayName: Fetch
        env:
          METARUST_REV: 'a7c98c416a0ec73d70f7892af8b87a9da58d48d3'

      - script: scripts/build.sh
        displayName: Build
